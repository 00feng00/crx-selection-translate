var a=chrome.contextMenus.create,b=chrome.tabs.executeScript,u=chrome.contextMenus.update,r=["http://*/*","https://*/*","file:///*","about:blank"];a({id:"youdaoTranslate",title:"用 有道 翻译“%s”",documentUrlPatterns:r,contexts:["selection"]});a({id:"baiduTranslate",title:"用 百度 翻译“%s”",documentUrlPatterns:r,contexts:["selection"]});a({type:"separator",id:"JustASeparator",documentUrlPatterns:r,contexts:["selection"]});a({type:"checkbox",id:"enableSeletion",title:"划词翻译",documentUrlPatterns:r,contexts:["all"],checked:false});a({type:"checkbox",id:"enableWeb",title:"用有道翻译整个网页",documentUrlPatterns:r,contexts:["all"],checked:false});chrome.contextMenus.onClicked.addListener(function(i,t){switch(i.menuItemId){case"youdaoTranslate":if(i.frameUrl){b({code:'if(frameElement && location.href==="'+i.frameUrl+'"){a.g("'+i.selectionText+'",a.f,"e")}',allFrames:true})}else{b({code:'a.g("'+i.selectionText+'",a.f,"e")'})}break;case"baiduTranslate":if(i.frameUrl){b({code:'if(frameElement && location.href==="'+i.frameUrl+'"){a.g("'+i.selectionText+'",a.f,"d")}',allFrames:true})}else{b({code:'a.g("'+i.selectionText+'",a.f,"d")'})}break;case"enableSeletion":if(i.checked){b({code:"a.h();a.k=true;",allFrames:true})}else{b({code:"a.j();a.k=false;",allFrames:true})}break;case"enableWeb":if(i.checked){b({code:"a.b();a.l=true;"})}else{b({code:'document.getElementById("OUTFOX_JTR_BAR").contentWindow.document.getElementById("OUTFOX_JTR_BAR_CLOSE").click();a.l=false;'})}break}});chrome.runtime.onMessage.addListener(function(m,s){u("enableSeletion",{checked:m[0],type:"checkbox",title:"划词翻译",documentUrlPatterns:r,contexts:["all"]});u("enableWeb",{checked:m[1],type:"checkbox",title:"用有道翻译整个网页",documentUrlPatterns:r,contexts:["all"]})});chrome.tabs.onActivated.addListener(function(i){b({code:"a.m();"})});