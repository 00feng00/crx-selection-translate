$.extend($,{isFrame:function(){return top===window?null:location.href}(),selection:getSelection(),mouseupHandler:function(a){var b;if(a.button===0&&(b=$.selection.toString().trim())){$.query({q:b},$.handleResult)}},open:function(){document.addEventListener("mouseup",this.mouseupHandler,true);return this},close:function(){document.removeEventListener("mouseup",this.mouseupHandler,true);return this},handleResult:function(c,a){var b=$.config.apis[a].generate(JSON.parse(c.responseText));console.log(b)}});chrome.runtime.onMessage.addListener(function(a){if(a.frameUrl){if($.isFrame!==a.frameUrl){return}}else{if($.isFrame){return}}switch(a.menuItemId){case"youdao":case"baidu":case"youdaoweb":$.config.menus[a.menuItemId].onmessage();return}if(a.isSelection){$.open()}else{$.close()}});chrome.storage.local.get("isSelection",function(a){if(a.isSelection){$.open()}});