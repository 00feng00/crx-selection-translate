var _gaq=_gaq||[],$={rootPath:chrome.extension.getURL("/"),config:{apis:{youdao:{id:"youdao",method:"GET",url:"http://fanyi.youdao.com/openapi.do?keyfrom=chrome&key=1361128838&type=data&doctype=json&version=1.1&q={query}",data:null,generate:function(a){return a}},baidu:{id:"baidu",method:"POST",url:"http://openapi.baidu.com/public/2.0/bmt/translate",data:"client_id=ZGoZqZPUPtSXCmdlCrtqEKFz&from={from}&to={to}&q={query}",generate:function(a){return a}}},menus:function(){var a=["http://*/*","https://*/*","file:///*","about:blank"],b=function(d,c){_gaq.push(["_trackEvent",d.menuItemId,"context"]);chrome.tabs.sendMessage(c.id,d)};return{youdao:{id:"youdao",title:"用 有道 翻译“%s”",contexts:["selection"],documentUrlPatterns:a,onclick:b,onmessage:function(){$.query({api:"youdao",q:$.selection.toString().trim()},$.handleResult)}},baidu:{id:"baidu",title:"用 百度 翻译“%s”",contexts:["selection"],documentUrlPatterns:a,onclick:b,onmessage:function(){$.query({api:"baidu",q:$.selection.toString().trim()},$.handleResult)}},youdaoweb:{id:"youdaoweb",title:"翻译网页",contexts:["all"],documentUrlPatterns:a,onclick:b,onmessage:function(){_gaq.push(["_trackEvent","youdaoweb","context"]);if(document.getElementById("OUTFOX_JTR_CDA")){return}var c=document.createElement("script");c.id="outfox_seed_js";c.charset="utf-8";c.setAttribute("src",$.rootPath+"js/youdaoweb.js");document.body.appendChild(c)}},s1:{type:"separator",id:"s1",contexts:["all"],documentUrlPatterns:a},select:{type:"checkbox",id:"select",title:"划词翻译",contexts:["all"],documentUrlPatterns:a,onclick:function(d,c){chrome.storage.local.set({isSelection:d.checked})}},s2:{type:"separator",id:"s2",contexts:["all"],documentUrlPatterns:a},donate:{id:"donate",title:"支持作者",contexts:["all"],documentUrlPatterns:a,onclick:function(d,c){_gaq.push(["_trackEvent",d.menuItemId,"context"]);chrome.tabs.create({url:"https://me.alipay.com/lmk123"})}}}}()},ajax:function(a,c){var b=new XMLHttpRequest();b.open(a.method||"GET",a.url);if(a.method==="POST"){b.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}b.onreadystatechange=function(d){if(b.readyState===4){c&&setTimeout(c,0,b,a.other)}};b.send(a.data||null);return this},extend:function(c,b){for(var a in b){if(b.hasOwnProperty(a)){c[a]=b[a]}}return c},query:function(a,e){console.log(a.q);var b=this.config.apis,c=b[a.api||"youdao"],d=encodeURI(a.q);if(typeof c.data==="string"){c.data=c.data.replace("{query}",d).replace("{from}",a.from||"auto").replace("{to}",a.to||"auto")}else{c.url=c.url.replace("{query}",d).replace("{from}",a.from||"auto").replace("{to}",a.to||"auto")}return this.ajax({method:c.method,url:c.url,data:c.data,other:c.id},e)}};_gaq.push(["_setAccount","UA-43276752-1"]);_gaq.push(["_trackPageview"]);